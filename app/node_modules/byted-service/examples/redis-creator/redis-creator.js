const { RedisCreator } = require('../../index');

async function main() {
    // 创建RedisCreator实例，如果需要通过PSM寻址，则传入Consul Agent配置
    const redisCreator = new RedisCreator({
        consul: {
            host: '10.3.23.41',
            port: 2280
        }
    });

    // 创建IORedis实例，对IORedis的实例化选项进行了扩展，支持通过PSM寻址
    const options = {
        psm: 'toutiao.redis.ies_fe_gecko_dev'
    };
    const redis = await redisCreator.create(options);

    // 操作redis数据库
    await redis.set('name', 'Yaphet');
    const name = await redis.get('name');
    console.log(name);
    
    // 断开连接
    redis.disconnect();
}

main();