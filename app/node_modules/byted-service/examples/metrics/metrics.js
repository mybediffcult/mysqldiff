const { Metrics } = require('../../');

const metrics = new Metrics({
    host: '10.11.40.199',
    port: 9123,
    defaultPrefix: 'ies.fe',
    bufferSize: 10,
    flushInterval: 3 * 1000
});

function delay(ms) {
    return new Promise((resolve) => {
        setTimeout(() => {
            resolve();
        }, ms)
    });
}

async function main() {
    for (let i = 0; i < 240; i++) {
        metrics.emitCounter('byted-service.metrics.test.from.local', 1, 'ies.fe', { name: 'yaphet' });
        console.log(i);
        await delay(1000);
    }
}

main();